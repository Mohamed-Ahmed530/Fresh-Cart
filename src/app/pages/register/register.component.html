<section class="w-3/4 mx-auto bg-gray-50 p-4 border rounded shadow-md">
    
    <h1 class="text-3xl font-medium my-4">Register Now<b>:</b></h1>
    
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

        <div class="name mb-1">
            <label for="Name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Name<b>:</b></label>
            <app-input formControlName="name" [type]="'text'" [id]="'Name'" ></app-input>

            @let nameControl = registerForm.get('name');
            <app-error-message [nameControl]="nameControl" ></app-error-message>
        </div>

        <div class="email mb-1">
            <label for="Email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Email<b>:</b></label>
            <app-input formControlName="email" [type]="'email'" [id]="'Email'" ></app-input>
            
            @let emailControl = registerForm.get('email');
            <app-error-message [nameControl]="emailControl" ></app-error-message>
        </div>

        <div class="password mb-1 relative">
            <label for="Password" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Password<b>:</b></label>
            <app-input formControlName="password" [type]="!togglePassword ?'password' : 'text'" [id]="'Password'" ></app-input>
        
            @let passwordControl = registerForm.get('password'); 
            <app-error-message [nameControl]="passwordControl" ></app-error-message>

            @if (!togglePassword) {
                <span (click)="toggle()" class="absolute cursor-pointer top-[38px] right-2" > <i class="fa-solid fa-eye"></i> </span>
            }@else {
                <span (click)="toggle()" class="absolute cursor-pointer top-[38px] right-2" > <i class="fa-solid fa-eye-slash"></i> </span>
            }
        
        </div>

        <div class="rePassword mb-1 relative">
            <label for="RePassword" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Re Password<b>:</b></label>
            <app-input formControlName="rePassword" [type]="!togglePassword ?'password' : 'text'" [id]="'RePassword'" ></app-input>
            
            @let rePasswordControl = registerForm.get('rePassword'); 
            <app-error-message [nameControl]="rePasswordControl" ></app-error-message>
            
            @if (registerForm.getError('mismatch') && rePasswordControl?.touched) {
                <div class="flex my-1 p-4  text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400" role="alert">
                    <div>
                        <ul class="mt-1.5 list-disc list-inside">
                            <li>rePassword confirmation is incorrect</li>
                        </ul>
                    </div>
                </div>
            }

            @if (!togglePassword) {
                <span (click)="toggle()" class="absolute cursor-pointer top-[38px] right-2" > <i class="fa-solid fa-eye"></i> </span>
            }@else {
                <span (click)="toggle()" class="absolute cursor-pointer top-[38px] right-2" > <i class="fa-solid fa-eye-slash"></i> </span>
            }
        
        </div>

        <div class="phone mb-1">
            <label for="Phone" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Phone<b>:</b></label>
            <app-input formControlName="phone" [type]="'tel'" [id]="'Phone'" ></app-input>

            @let phoneControl = registerForm.get('phone');
            <app-error-message [nameControl]="phoneControl" ></app-error-message>
        </div>

        <button type="submit" class="btn-main my-2">SignUp 
            @if (isCallingApi) {
                <span> <i class="fa fa-spin fa-spinner"></i> </span> 
            }
        </button>

        @if (success) {
            <p class="flex items-center p-4 mb-4 text-2xl text-green-800 border border-green-300 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400 dark:border-green-800">
                {{success}} <i class="fa-solid fa-check text-3xl ms-3"></i>
            </p>
        }
        @else if (msgError) {
            <p class="flex my-2 p-4 mb-4 text-2xl text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400"> {{msgError}} </p>
        }


    </form>
    
</section>